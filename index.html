<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Countdown â€” 22 December</title>
  <style>
    /* Reset + layout */
    :root{
      --bg-dark: rgba(0,0,0,0.35);
      --card-bg: rgba(255,255,255,0.9);
      --accent: #005eb8; /* Swedish blue */
      --accent2: #fecb00; /* Swedish yellow */
    }
    html,body{
      height:100%;
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Full-screen flag SVG background */
    .flag-svg{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      z-index:-2;
      display:block;
      pointer-events:none;
      user-select:none;
    }

    /* dark overlay so text stays readable */
    .backdrop{
      position:fixed;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.18));
      z-index:-1;
      pointer-events:none;
    }

    /* Centering and card */
    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:2rem;
      box-sizing:border-box;
    }

    .card{
      background:var(--card-bg);
      padding:2rem;
      border-radius:12px;
      box-shadow:0 10px 30px rgba(8,20,40,0.25);
      text-align:center;
      max-width:980px;
      width:100%;
      backdrop-filter: blur(6px) saturate(1.05);
    }

    h1{
      margin:0 0 0.5rem 0;
      font-size:clamp(1.1rem, 2.8vw, 2rem);
      color:#07223b;
      display:flex;
      align-items:center;
      gap:.6rem;
      justify-content:center;
    }

    .subtitle{
      margin:0 0 1.25rem 0;
      color:#254156;
      opacity:.85;
      font-size:clamp(.85rem, 1.8vw, 1.05rem);
    }

    /* Countdown layout */
    .countdown{
      display:flex;
      gap:1rem;
      justify-content:center;
      flex-wrap:wrap;
    }

    .timebox{
      min-width:100px;
      padding:0.9rem 1rem;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.82));
      border:1px solid rgba(8,20,40,0.06);
      box-shadow: 0 6px 18px rgba(3,12,30,0.08);
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    .timebox strong{
      font-size:clamp(1.4rem, 4vw, 2.2rem);
      color:var(--accent);
      letter-spacing: -0.5px;
    }

    .timebox span{
      font-size:0.9rem;
      color:#0f3b5e;
      margin-top:.35rem;
    }

    /* small footer */
    .note{
      margin-top:1.25rem;
      color:#103247;
      opacity:0.9;
      font-size:0.9rem;
    }

    /* Make it look nice on mobile */
    @media (max-width:520px){
      .timebox{ min-width:72px; padding:.6rem .7rem; }
      .timebox strong{ font-size:1.2rem; }
      .countdown{ gap:.6rem; }
      .card{ padding:1.1rem; border-radius:10px; }
    }

    /* small accent line using the yellow */
    .accent-line{
      height:6px;
      width:160px;
      margin:1rem auto 0.75rem;
      border-radius:6px;
      background: linear-gradient(90deg, var(--accent2), #ffd84a 40%, var(--accent2));
      box-shadow: inset 0 -2px 6px rgba(0,0,0,0.06);
    }

    /* For very large screens, amplify look */
    @media (min-width:1400px){
      .card{ padding:3rem; }
      .timebox strong{ font-size:3rem; }
    }

    /* Hide the svg outline and ensure crisp rendering */
    svg{ shape-rendering:geometricPrecision; }
  </style>
</head>
<body>
  <!-- Inline SVG Swedish flag with an animated displacement filter to create a waving effect.
       The SVG covers the viewport and uses preserveAspectRatio="xMidYMid slice" so it crops nicely. -->
  <svg class="flag-svg" viewBox="0 0 160 100" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
    <defs>
      <!-- Wavy filter: turbulence -> displacement -->
      <filter id="wavy" x="-25%" y="-25%" width="150%" height="150%">
        <!-- turbulence to generate noise -->
        <feTurbulence id="noise" baseFrequency="0.02 0.25" numOctaves="3" seed="5" stitchTiles="stitch" result="turb" />
        <!-- animate the turbulence slightly to create a flowing wave feel -->
        <animate xlink:href="#noise"
                 attributeName="baseFrequency"
                 values="0.02 0.22; 0.03 0.18; 0.02 0.22"
                 dur="6s"
                 repeatCount="indefinite" />
        <!-- displacement mapping -->
        <feDisplacementMap in="SourceGraphic" in2="turb" scale="8" xChannelSelector="R" yChannelSelector="G" />
      </filter>
    </defs>

    <!-- Flag group to which the wavy filter is applied -->
    <g filter="url(#wavy)">
      <!-- Blue background -->
      <rect width="160" height="100" fill="#005eb8"/>
      <!-- Yellow cross
           Sweden's flag cross is offset toward the hoist; proportions are approximated:
           vertical bar approx at x=46 (from left) width 18, horizontal bar at y=44 height 12 -->
      <rect x="46" y="0" width="18" height="100" fill="#fecb00"/>
      <rect x="0" y="44" width="160" height="12" fill="#fecb00"/>
    </g>
  </svg>

  <div class="backdrop" aria-hidden="true"></div>

  <main class="wrap" role="main">
    <section class="card" aria-labelledby="title">
      <h1 id="title">
        <span aria-hidden="true" style="font-size:1.1em;">ðŸ‡¸ðŸ‡ª</span>
        Countdown to 22 December
      </h1>
      <div class="accent-line" aria-hidden="true"></div>
      <p class="subtitle">Time remaining until 22 December (local time)</p>

      <div class="countdown" role="timer" aria-live="polite" aria-atomic="true" id="countdown">
        <div class="timebox" aria-label="Days">
          <strong id="days">0</strong>
          <span>Days</span>
        </div>
        <div class="timebox" aria-label="Hours">
          <strong id="hours">00</strong>
          <span>Hours</span>
        </div>
        <div class="timebox" aria-label="Minutes">
          <strong id="minutes">00</strong>
          <span>Minutes</span>
        </div>
        <div class="timebox" aria-label="Seconds">
          <strong id="seconds">00</strong>
          <span>Seconds</span>
        </div>
      </div>

      <p class="note" id="target-note"></p>
    </section>
  </main>

  <script>
    // Compute the next Dec 22 in local time. If today is Dec 22 or earlier in the day,
    // countdown to the start of Dec 22 (00:00:00) of the current year.
    // If today is after Dec 22, countdown to Dec 22 next year.
    (function(){
      function getTarget() {
        const now = new Date();
        const year = now.getFullYear();
        const dec22ThisYear = new Date(year, 11, 22, 0, 0, 0, 0); // months are 0-based
        if (now > dec22ThisYear) {
          // use next year
          return new Date(year + 1, 11, 22, 0, 0, 0, 0);
        }
        return dec22ThisYear;
      }

      const target = getTarget();

      // show human-friendly target note
      const targetNote = document.getElementById('target-note');
      const opts = { weekday:'long', year:'numeric', month:'long', day:'numeric', timeZoneName:'short' };
      try {
        targetNote.textContent = 'Target: ' + target.toLocaleString(undefined, opts);
      } catch(e){
        targetNote.textContent = 'Target: ' + target.toString();
      }

      // Elements
      const daysEl = document.getElementById('days');
      const hrsEl = document.getElementById('hours');
      const minsEl = document.getElementById('minutes');
      const secsEl = document.getElementById('seconds');

      function pad(n){ return String(n).padStart(2,'0'); }

      function update() {
        const now = new Date();
        let diff = target - now; // milliseconds
        if (diff < 0) diff = 0;

        const sec = 1000;
        const min = 60 * sec;
        const hr  = 60 * min;
        const day = 24 * hr;

        const days = Math.floor(diff / day);
        diff -= days * day;
        const hours = Math.floor(diff / hr);
        diff -= hours * hr;
        const minutes = Math.floor(diff / min);
        diff -= minutes * min;
        const seconds = Math.floor(diff / sec);

        daysEl.textContent = days;
        hrsEl.textContent = pad(hours);
        minsEl.textContent = pad(minutes);
        secsEl.textContent = pad(seconds);
      }

      // Initial update
      update();

      // Update every 250ms to keep seconds crisp and the display responsive
      const timer = setInterval(() => {
        update();
        // stop once target reached
        if (new Date() >= target) {
          clearInterval(timer);
        }
      }, 250);
    })();
  </script>
</body>
</html>
